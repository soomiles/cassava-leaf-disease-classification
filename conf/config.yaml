seed: 42
device_list: [0, 1, 2, 3]
df_path: '${root_dir}/csv/train.csv'
log_dir: '/workspace/logs/cassava-leaf-disease-classification'
train:
  n_fold: 5
  use_fold: [0, 1, 2, 3, 4] # [0, 1, 2, 3, 4]
  n_epochs: 10
  total_epoch: 2

  do_load_ckpt: True
  finetune: True
  ckpt_params:
    log_path: '${log_dir}/2021-01-25/06-26-25'
    do_freeze_top_layers: True

  do_distillation: False
  distillation_params:
    dir: '${log_dir}/2021-02-05/08-26-15'
    loss:
      name: label_smoothing_onehot
      args:
        smoothing: 0.
        log_softmax: True
    model_name: 'regnety_040' # tf_efficientnet_b4_ns
  run_test: False

defaults:
  - dataset: merged_512_cutmix
  # 'deit_base_distilled_patch16_384' 'deit_base_patch16_384'
  # 'efficientnet-b4' 'resnext50_32x4d' 'resnest50d_1s4x24d' 'regnety_040'
  - network: resnext50_32x4d
  - loss: label_smoothing_onehot # bi_tempered_logistic_loss
  - optimizer: adamw

hydra:
  run:
    dir: '${log_dir}/${now:%Y-%m-%d}/${now:%H-%M-%S}'
  sweep:
    dir: '${log_dir}/${now:%Y-%m-%d}/${now:%H-%M-%S}'
    subdir: ${hydra.job.num}
